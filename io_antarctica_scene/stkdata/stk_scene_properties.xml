<?xml version="1.0"?>
<properties>
    <!-- type selection -->
    <enum id="type" label="Scene Type" default="none" doc="SuperTuxKart scene type">
        <item value="none" label="None"/>
        <item value="kart" label="Kart"/>
        <item value="track" label="Track"/>
        <item value="library" label="Library Node"/>
    </enum>

    <!-- general settings -->
    <string id="name" label="Name" default="Some Name"
            bind="type" condition="lambda t: t == 'kart' or t == 'track'"
            doc="The name of the track or kart, like it would appear in-game"/>
    <string id="identifier" label="Identifier (Folder Name)" default="my_project"
            bind="type" condition="lambda t: t != 'none'"
            doc="An internal identifier (lower case, no spaces); will also be the name of the folder"/>
    <enum id="category" label="Category" default="standard"
          bind="type" condition="lambda t: t == 'kart' or t == 'track'"
          doc="The category this track or kart belongs to">
        <item value="standard" label="Standard"/>
        <item value="add-ons" label="Add-Ons"/>
        <item value="wip" label="Work In Progress"/>
    </enum>
    <string id="designer" label="Designer" default="Your Name"
            bind="type" condition="lambda t: t == 'kart' or t == 'track'"
            doc="Name of the designer of this creation"/>

    <!-- properties panel -->
    <panel id="type_properties" label="Properties"
           bind="type" condition="lambda t: t != 'none' and t != 'library'" expanded="expanded">

        <!-- kart specific -->
        <image id="icon" label="Kart Icon"
               bind="type" condition="lambda t: t == 'kart'"
               doc="An icon to display in the kart selection screen"/>
        <color id="highlight_color" label="Highlight Color" default="1.0 1.0 1.0"
               bind="type" condition="lambda t: t == 'kart'"
               doc="Color used to highlight the kart's icon in the interface"/>
        <image id="icon_minimap" label="Minimap Icon"
               bind="type" condition="lambda t: t == 'kart'"
               doc="An icon to display for this kart on the minimap"/>
        <image id="shadow" label="Drop Shadow"
               bind="type" condition="lambda t: t == 'kart'"
               doc="A drop shadow (silhouette) used for this kart"/>
        <separator id="__separator1"/>

        <!-- kart type -->
        <enum id="kart_type" label="Kart Type" default="medium" bind="type" condition="lambda t: t == 'kart'"
              doc="The karts specifications">
            <item value="light" label="Light"/>
            <item value="medium" label="Medium"/>
            <item value="heavy" label="Heavy"/>
        </enum>

        <!-- kart sfx -->
        <enum id="sfx_engine" label="Engine Sound" default="large" bind="type" condition="lambda t: t == 'kart'"
              doc="The karts engine sound to use">
            <item value="large" label="Large"/>
            <item value="small" label="Small"/>
        </enum>

        <!-- kart gravity shift -->
        <coordinates id="gravity_shift" label="Gravity Center Shift  " default="0.0 0.0 0.0" min="-1.0" max="1.0"
                     bind="type" condition="lambda t: t == 'kart'"
                     doc="Can be used to offset the gravity center of the kart if it topples over too easily"/>

        <!-- kart exhaust -->
        <bool id="exhaust" label="Custom Exhaust Effect" default="false"
              bind="type" condition="lambda t: t == 'kart'"
              doc="Whether this kart should use a custom exhaust particle effect"/>
        <box id="exhaust_box" bind="type exhaust" condition="lambda t, p: p and t == 'kart'">
            <string id="exhaust_particles" label="Particle Effect" default="kart_exhaust.xml"
                    doc="The particles definition file (XML) to use"/>
        </box>

        <!-- kart leaning properties -->
        <bool id="lean" label="Specify Leaning Behaviour" default="false"
              bind="type" condition="lambda t: t == 'kart'"
              doc="The applied visual leaning behaviour for the kart can be manipulated manually; in most cases, there is no need to adjust this"/>
        <box id="lean_box" bind="type lean" condition="lambda t, p: p and t == 'kart'">
            <string id="lean_max" label="Formula" default="*0-10"
                    doc="The formula applied to the leaning calculations for the kart; care needs to be taken when specifying this value, an understanding of its interpretation is strongly recommended"/>
        </box>

        <!-- track specific -->
        <image id="screenshot" label="In-Game Screenshot" bind="type" condition="lambda t: t == 'track'"
               doc="A screenshot of this track that will be displayed in the selection screen"/>
        <string id="music" label="Track Music" default="kart_grand_prix.music"
                bind="type" condition="lambda t: t == 'track'"
                doc="The definition file (.music) for the music that is played on this track"/>
        <separator id="__separator2" bind="type" condition="lambda t: t == 'track'"/>

        <!-- track type -->
        <enum id="track_type" label="Track Type" default="race" bind="type" condition="lambda t: t == 'track'"
              doc="The type of the track">
            <item value="race" label="Race Track" doc="A normal race track"/>
            <item value="arena" label="Battle Arena"
                  doc="A battle arena; '3-Strikes Battle' as well as 'Capture The Flag'"/>
            <item value="soccer" label="Soccer Field" doc="Play soccer on this track"/>
            <item value="cutscene" label="Cutscene" doc="An in-game cutscene"/>
        </enum>
        <float id="far_clip" label="Camera Far Clip Distance" default="1000.0" min="0.0" max="5000.0"
               bind="type" condition="lambda t: t == 'track'"
               doc="Main cameras far clipping distance; distance from the camera at which objects are no more visible"/>
        <bool id="ctf_active" label="Is 'Capture The Flag' Arena" default="false"
              bind="type track_type" condition="lambda t, p: p == 'arena' and t == 'track'"
              doc="Checked if possible to play 'Capture The Flag' in this arena"/>
        <bool id="smooth_normals" label="Normals Smoothing" default="false"
              bind="type" condition="lambda t: t == 'track'"
              doc="Whether to interpolate the normals; results in smoother driving but requires that floors and walls need to be separate objects or split"/>
        <bool id="auto_reset" label="Auto Rescue" default="true"
              bind="type" condition="lambda t: t == 'track'"
              doc="Whether to automatically rescue (reset) the player if they tuple over or find themselves upside down"/>

        <!-- race settings -->
        <bool id="reverse" label="Can Be Driven In Reverse" default="false"
              bind="type track_type" condition="lambda t, p: p == 'race' and t == 'track'"
              doc="Whether this race can be driven in reverse"/>
        <int id="lap_count" label="Default Number Of Laps" default="3" min="1" max="20"
             bind="type track_type" condition="lambda t, p: p == 'race' and t == 'track'"
             doc="The default number of laps for this track"/>
        <int id="start_rows" label="Karts Per Row On Start" default="3" min="1" max="20"
             bind="type track_type" condition="lambda t, p: p == 'race' and t == 'track'"
             doc="How many karts are being placed in one row; the more karts, the wider the track must be (since each kart in a row will have a distance of start-sidewards-distance)"/>
        <float id="start_forward" label="Forward Distance Between Karts On Start" default="1.5" min="0.0" max="50.0"
               bind="type track_type" condition="lambda t, p: p == 'race' and t == 'track'"
               doc="How big the distance between a kart to the one in front of it is at start"/>
        <float id="start_side" label="Side Distance Between Karts On Start" default="1.8" min="0.0" max="50.0"
               bind="type track_type" condition="lambda t, p: p == 'race' and t == 'track'"
               doc="How big the distance to the right/left of each kart in one row is at start"/>
        <float id="start_up" label="Karts Upper Limit On Start" default="1.1" min="0.0" max="50.0"
               bind="type track_type" condition="lambda t, p: p == 'race' and t == 'track'"
               doc="Sometimes drivelines are too low and will be under the actual mesh. This is a simple vertical offset added to each start positions to make sure that karts start on top of the track (and not under it). Generally the drivelines should be fixed, but this allows a quick solution for existing tracks"/>

        <!-- track lighting/weather -->
        <panel id="track_lighting" label="Lighting" bind="type" condition="lambda t: t == 'track'">
            <bool id="shadows" label="Dynamic Shadows" default="true"
                  doc="Whether to enable dynamic shadows on this track"/>
            <enum id="daytime" label="Daytime" default="day"
                  doc="Set the time of the track; used for enabling or disabling some lighting effects">
                <item value="day" label="Day"/>
                <item value="night" label="Night"/>
            </enum>

            <!-- sky info -->
            <label id="sky_info">Use world shaders for skybox and environment lighting.</label>

            <!-- track fog -->
            <separator id="__separator2"/>
            <bool id="fog" label="Fog" default="false"
                  doc="Enable fog on this track; simulates particles in the air and naturally leads to light halos (bloom)"/>
            <box id="fog_box" bind="fog" condition="lambda f: f">
                <color id="fog_color" label="Color" default="0.8 0.8 0.8" doc="The color of the fog"/>
                <float id="fog_max" label="Maximum Density" default="0.8" min="0.0" max="1.0"
                       doc="The maximum density of the fog; a value of 1.0 completely covers scenery in fog at the furthest distance"/>
                <float id="fog_from" label="From Distance" default="5.0" min="0.0" max="5000.0"
                       doc="The distance from the camera the fog starts; it will gain in density linearly"/>
                <float id="fog_to" label="To Distance" default="200.0" min="0.0" max="5000.0"
                       doc="The distance from the camera the fog will have reached its maximum density"/>
            </box>

            <!-- track weather effect -->
            <separator id="__separator3" bind="fog" condition="lambda f: f"/>
            <label id="weather_info">Weather</label>
            <box id="weather_box">
                <enum id="weather" label="Weather Effect" default="none"
                      doc="Select a weather effect for this track">
                    <item value="none" label="None"/>
                    <item value="rain" label="Rain"/>
                    <item value="snow" label="Snow"/>
                </enum>
                <bool id="weather_lightning" label="Lightning" default="false"
                      doc="Whether to enable a lightning effect on this track"/>
                <string id="weather_sound" label="Sound Effect" default=""
                        doc="File name of the weather sound to play"/>
            </box>
        </panel>
    </panel>
</properties>
